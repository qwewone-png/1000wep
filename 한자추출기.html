<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>한자 정리 도구</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Noto Sans KR', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    background-color: #f4f7f6;
    color: #333;
    min-height: 100vh;
    box-sizing: border-box;
  }
  .container {
    background-color: #ffffff;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    width: 100%;
    max-width: 800px;
    margin-bottom: 20px;
    box-sizing: border-box;
  }
  h1 {
    color: #2c3e50;
    text-align: center;
    margin-bottom: 5px; /* 설명 텍스트를 위해 마진 조정 */
    font-weight: 700;
  }
  .tool-description {
    text-align: center;
    color: #555;
    margin-bottom: 25px;
    font-size: 0.95rem;
  }
  textarea {
    width: 100%;
    padding: 15px;
    margin-bottom: 20px;
    border: 2px solid #a8dadc;
    border-radius: 8px;
    font-size: 1rem;
    line-height: 1.5;
    resize: vertical;
    min-height: 150px;
    box-sizing: border-box;
    font-family: 'Noto Sans KR', sans-serif; /* 텍스트 에어리어에도 폰트 적용 */
  }
  textarea:focus {
    outline: none;
    border-color: #457b9d;
    box-shadow: 0 0 0 3px rgba(69, 123, 157, 0.3);
  }
  .button-group {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 25px;
  }
  button {
    background-color: #457b9d;
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: 8px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
    font-weight: 700;
  }
  button:hover {
    background-color: #1d3557;
    transform: translateY(-2px);
  }
  button:active {
    transform: translateY(0);
  }
  #copyOutputBtn {
    background-color: #2a9d8f;
  }
  #copyOutputBtn:hover {
    background-color: #264653;
  }
  .result-label {
    font-weight: 700;
    margin-bottom: 10px;
    color: #2c3e50;
    text-align: center;
  }
  .message {
    text-align: center;
    color: #e63946;
    margin-top: -10px;
    margin-bottom: 15px;
    font-weight: 700;
  }
</style>
</head>
<body>

  <div class="container">
    <h1>한자 텍스트 정리 도구</h1>
    <p class="tool-description">
      입력된 텍스트에서 **한자를 제외한 모든 문자(영어, 숫자, 한글, 특수문자 등)를 삭제**하고,
      남은 한자 중 **중복된 한자는 첫 번째 등장한 순서대로 하나만 남겨** 고유한 한자 목록을 추출합니다.
    </p>
    <p class="message" id="messageArea"></p>
    
    <label for="inputText">원문 텍스트를 여기에 붙여넣으세요:</label>
    <textarea id="inputText" placeholder="예시: 世間 만물의 법칙은 한자 &#x4E00;&#x9FFF; 그리고 기타 등등입니다."></textarea>
    
    <div class="button-group">
      <button id="processBtn">한자 정리하기</button>
      <button id="clearBtn">초기화</button>
    </div>
    
    <label for="outputText" class="result-label">정리된 한자 결과:</label>
    <textarea id="outputText" readonly placeholder="여기에 정리된 한자가 표시됩니다."></textarea>

    <div class="button-group">
      <button id="copyOutputBtn">결과 클립보드에 복사</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const inputText = document.getElementById('inputText');
      const outputText = document.getElementById('outputText');
      const processBtn = document.getElementById('processBtn');
      const clearBtn = document.getElementById('clearBtn');
      const copyOutputBtn = document.getElementById('copyOutputBtn');
      const messageArea = document.getElementById('messageArea');

      function showMessage(msg, type = 'info') {
        messageArea.textContent = msg;
        messageArea.style.color = type === 'error' ? '#e63946' : '#2a9d8f';
        messageArea.style.display = 'block';
        setTimeout(() => {
          messageArea.style.display = 'none';
        }, 3000);
      }

      processBtn.addEventListener('click', () => {
        const inputContent = inputText.value;
        if (!inputContent.trim()) {
          showMessage('정리할 텍스트를 입력해주세요.', 'error');
          return;
        }

        // 1. 한자만 추출 (CJK 통합 한자 범위: U+4E00 ~ U+9FFF)
        // 정규식을 사용하여 한자 범위의 문자만 추출
        const hanziOnly = inputContent.match(/[\u4e00-\u9fff]/g);
        
        if (!hanziOnly || hanziOnly.length === 0) {
            outputText.value = '';
            showMessage('입력된 텍스트에 한자가 없습니다.', 'info');
            return;
        }

        // 2. 중복된 한자 제거 (첫 번째 등장 순서 유지)
        // Set을 사용하여 중복을 자동으로 제거하고, Array.from으로 다시 배열로 변환
        const uniqueHanziArray = Array.from(new Set(hanziOnly));
        const uniqueHanzi = uniqueHanziArray.join('');

        outputText.value = uniqueHanzi;
        showMessage('텍스트 정리가 완료되었습니다!', 'info');
      });

      clearBtn.addEventListener('click', () => {
        inputText.value = '';
        outputText.value = '';
        showMessage('입력 및 결과 영역이 초기화되었습니다.', 'info');
      });

      copyOutputBtn.addEventListener('click', () => {
        const outputContent = outputText.value;
        if (!outputContent) {
          showMessage('복사할 내용이 없습니다.', 'error');
          return;
        }
        
        // document.execCommand('copy')는 구식이며, navigator.clipboard.writeText가 더 최신입니다.
        // 하지만 iframe 환경에서 navigator.clipboard가 제한될 수 있으므로
        // 여기서는 안전하게 execCommand를 사용합니다.
        try {
          const textarea = document.createElement('textarea');
          textarea.value = outputContent;
          textarea.style.position = 'fixed'; // 화면 밖으로 이동
          textarea.style.top = '-9999px';
          document.body.appendChild(textarea);
          textarea.select();
          document.execCommand('copy');
          document.body.removeChild(textarea);
          showMessage('클립보드에 복사되었습니다!', 'info');
        } catch (err) {
          console.error('클립보드 복사 실패:', err);
          showMessage('클립보드 복사에 실패했습니다.', 'error');
        }
      });
    });
  </script>
</body>
</html>
